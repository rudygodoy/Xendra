<?xml version="1.0" encoding="UTF-8"?>
<jasperReport name="RESUMEN_VENTAS_VENDEDOR" columnCount="1" printOrder="Vertical" orientation="Landscape" pageWidth="842" pageHeight="595" columnWidth="782" columnSpacing="0" leftMargin="30" rightMargin="30" topMargin="48" bottomMargin="20" whenNoDataType="NoPages" isTitleNewPage="false" isSummaryNewPage="false" language="java" isFloatColumnFooter="false" whenResourceMissingType="Null" isIgnorePagination="false">
  <property name="Description" value="RESUMEN_VENTAS_VENDEDOR.jrxml" />
  <property name="FileName" value="RESUMEN_VENTAS_VENDEDOR.jrxml" />
  <property name="Synchronized" value="2017-06-06 22:10:32.634" />
  <property name="Identifier" value="b7ad085c-705a-4a07-88ca-8e9c5d09e733" />
  <property name="ireport.scriptlethandling" value="0" />
  <property name="ireport.encoding" value="UTF-8" />
  <import value="java.util.*" />
  <import value="net.sf.jasperreports.engine.*" />
  <import value="net.sf.jasperreports.engine.data.*" />
  <parameter name="AD_Client_ID" isForPrompting="true" class="java.math.BigDecimal">
    <defaultValueExpression><![CDATA[new BigDecimal(1000024)]]></defaultValueExpression>
  </parameter>
  <parameter name="AD_Org_ID" isForPrompting="true" class="java.math.BigDecimal">
    <defaultValueExpression><![CDATA[new BigDecimal(1000024)]]></defaultValueExpression>
  </parameter>
  <parameter name="IsSOTrx" isForPrompting="true" class="java.lang.String" />
  <parameter name="FECHA1" isForPrompting="true" class="java.sql.Timestamp">
    <defaultValueExpression><![CDATA[java.sql.Timestamp.valueOf("2007-01-01 00:00:00")]]></defaultValueExpression>
  </parameter>
  <parameter name="FECHA2" isForPrompting="true" class="java.sql.Timestamp">
    <defaultValueExpression><![CDATA[java.sql.Timestamp.valueOf("2009-12-31 00:00:00")]]></defaultValueExpression>
  </parameter>
  <queryString language="sql"><![CDATA[SELECT
     count(*) as she,
     c_invoice.dateinvoiced as "Fecha",
     ad_client.ad_client_id,
     ad_client."name" as cliente,   
     ad_org.ad_org_id,
     ad_org."name" as org,
     c_bpartner."name" as "Vendedor",
     c_invoice.issotrx as "ventas",
     c_invoice."grandtotal" AS "Total"

FROM 
     "xendra".c_invoice 

join "xendra".ad_user on  c_invoice.ad_user_id = ad_user.ad_user_id
join "xendra".c_bpartner on  c_invoice.c_bpartner_id = c_bpartner.c_bpartner_id
join "xendra".ad_client on  c_invoice.ad_client_id = ad_client.ad_client_id
join "xendra".ad_org on  c_invoice.ad_org_id = ad_org.ad_org_id
join "xendra".c_bpartner_location on  c_invoice.c_bpartner_location_id = c_bpartner_location.c_bpartner_location_id
join "xendra".c_location on c_bpartner_location.c_location_id = c_location.c_location_id

where c_bpartner.issalesrep= 'Y' and ad_client.ad_client_id = $P{AD_Client_ID} and ad_org.ad_org_id = $P{AD_Org_ID} and c_invoice.issotrx = $P{IsSOTrx} and date(c_invoice.dateinvoiced) >= date($P{FECHA1}) AND date(c_invoice.dateinvoiced) <= date($P{FECHA2})
group by 2,3,4,5,6,7,8,9
order by she ASC]]></queryString>
  <field name="she" class="java.lang.Long" />
  <field name="Fecha" class="java.sql.Timestamp" />
  <field name="ad_client_id" class="java.math.BigDecimal" />
  <field name="cliente" class="java.lang.String" />
  <field name="ad_org_id" class="java.math.BigDecimal" />
  <field name="org" class="java.lang.String" />
  <field name="Vendedor" class="java.lang.String" />
  <field name="ventas" class="java.lang.String" />
  <field name="Total" class="java.math.BigDecimal" />
  <background>
    <band height="0" isSplitAllowed="true" />
  </background>
  <title>
    <band height="63" isSplitAllowed="true">
      <staticText>
        <reportElement x="213" y="15" width="355" height="23" forecolor="#000099" key="staticText-1" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement textAlignment="Center">
          <font pdfFontName="Helvetica-Bold" size="18" isBold="true" pdfEncoding="Cp1250" isStrikeThrough="false" />
        </textElement>
        <text><![CDATA[RESUMEN DE VENTAS POR TIENDA]]></text>
      </staticText>
      <line direction="TopDown">
        <reportElement x="13" y="57" width="760" height="1" forecolor="#0033CC" key="line-2" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <graphicElement stretchType="NoStretch" />
      </line>
    </band>
  </title>
  <pageHeader>
    <band height="55" isSplitAllowed="true">
      <textField isStretchWithOverflow="false" pattern="dd/MM/yyyy" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
        <reportElement x="680" y="3" width="80" height="18" key="textField-2" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement textAlignment="Right">
          <font size="10" isItalic="false" />
        </textElement>
        <textFieldExpression class="java.util.Date"><![CDATA[new Date()]]></textFieldExpression>
      </textField>
      <staticText>
        <reportElement x="20" y="20" width="89" height="16" forecolor="#0033CC" key="staticText-3" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement>
          <font fontName="SansSerif" pdfFontName="Helvetica-Bold" size="10" isBold="true" />
        </textElement>
        <text><![CDATA[ORGANIZACIÃ“N:]]></text>
      </staticText>
      <staticText>
        <reportElement x="20" y="3" width="51" height="16" forecolor="#0033CC" key="staticText-4" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement>
          <font pdfFontName="Helvetica-Bold" size="10" isBold="true" />
        </textElement>
        <text><![CDATA[EMPRESA:]]></text>
      </staticText>
      <staticText>
        <reportElement x="615" y="3" width="67" height="18" forecolor="#0033CC" key="staticText-5" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement>
          <font pdfFontName="Helvetica-Bold" size="10" isBold="true" />
        </textElement>
        <text><![CDATA[FECHA:]]></text>
      </staticText>
      <staticText>
        <reportElement x="615" y="20" width="67" height="18" forecolor="#0033CC" key="staticText-6" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement>
          <font pdfFontName="Helvetica-Bold" size="10" isBold="true" />
        </textElement>
        <text><![CDATA[HORA:]]></text>
      </staticText>
      <textField isStretchWithOverflow="false" pattern="hh:mm aaa" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
        <reportElement x="680" y="20" width="80" height="18" key="textField-3" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement textAlignment="Right">
          <font size="10" isItalic="false" />
        </textElement>
        <textFieldExpression class="java.util.Date"><![CDATA[new Date()]]></textFieldExpression>
      </textField>
      <line direction="TopDown">
        <reportElement x="12" y="50" width="760" height="1" forecolor="#0033CC" key="line-1" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <graphicElement stretchType="NoStretch" />
      </line>
      <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
        <reportElement x="681" y="35" width="65" height="16" key="textField-4" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement textAlignment="Right">
          <font pdfFontName="Helvetica-Oblique" size="8" isItalic="true" />
        </textElement>
        <textFieldExpression class="java.lang.String"><![CDATA["Pag. " + $V{PAGE_NUMBER} + " de "]]></textFieldExpression>
      </textField>
      <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Report" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
        <reportElement x="749" y="35" width="22" height="16" key="textField-5" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement>
          <font pdfFontName="Helvetica-Oblique" size="8" isItalic="true" />
        </textElement>
        <textFieldExpression class="java.lang.String"><![CDATA["" + $V{PAGE_NUMBER} + ""]]></textFieldExpression>
      </textField>
      <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
        <reportElement x="130" y="2" width="100" height="20" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement>
          <font />
        </textElement>
        <textFieldExpression class="java.lang.String"><![CDATA[$F{cliente}]]></textFieldExpression>
      </textField>
      <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
        <reportElement x="130" y="19" width="100" height="20" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <box />
        <textElement>
          <font />
        </textElement>
        <textFieldExpression class="java.lang.String"><![CDATA[$F{org}]]></textFieldExpression>
      </textField>
    </band>
  </pageHeader>
  <columnHeader>
    <band height="0" isSplitAllowed="true" />
  </columnHeader>
  <detail>
    <band height="0" isSplitAllowed="true" />
  </detail>
  <columnFooter>
    <band height="0" isSplitAllowed="true" />
  </columnFooter>
  <pageFooter>
    <band height="0" isSplitAllowed="true" />
  </pageFooter>
  <summary>
    <band height="350" isSplitAllowed="true">
      <crosstab isRepeatColumnHeaders="true" isRepeatRowHeaders="true" columnBreakOffset="10" runDirection="LTR">
        <reportElement x="0" y="13" width="782" height="131" key="crosstab-1" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
        <crosstabDataset isDataPreSorted="true">
          <dataset resetType="Report" incrementType="None" />
        </crosstabDataset>
        <crosstabHeaderCell>
          <cellContents mode="Transparent">
            <box />
            <staticText>
              <reportElement x="9" y="6" width="58" height="16" key="staticText-7" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
              <box />
              <textElement>
                <font pdfFontName="Helvetica-Bold" isBold="true" />
              </textElement>
              <text><![CDATA[TIENDA]]></text>
            </staticText>
          </cellContents>
        </crosstabHeaderCell>
        <rowGroup name="Vendedor" width="68" totalPosition="End" headerPosition="Top">
          <bucket order="Ascending">
            <bucketExpression class="java.lang.String"><![CDATA[$F{Vendedor}]]></bucketExpression>
          </bucket>
          <crosstabRowHeader>
            <cellContents mode="Transparent">
              <box />
              <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
                <reportElement x="9" y="0" width="56" height="33" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
                <box />
                <textElement textAlignment="Left" verticalAlignment="Middle">
                  <font pdfFontName="Helvetica-Bold" size="8" isBold="true" />
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$V{Vendedor}]]></textFieldExpression>
              </textField>
            </cellContents>
          </crosstabRowHeader>
          <crosstabTotalRowHeader>
            <cellContents mode="Transparent">
              <box />
              <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
                <reportElement x="5" y="0" width="62" height="30" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
                <box />
                <textElement textAlignment="Center" verticalAlignment="Middle">
                  <font pdfFontName="Helvetica-Bold" size="8" isBold="true" />
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA["GRAN TOTAL"]]></textFieldExpression>
              </textField>
            </cellContents>
          </crosstabTotalRowHeader>
        </rowGroup>
        <columnGroup name="Fecha" height="25" totalPosition="End" headerPosition="Center">
          <bucket order="Ascending">
            <bucketExpression class="java.lang.String"><![CDATA[(new SimpleDateFormat("MM     MMMMM")).format($F{Fecha})]]></bucketExpression>
          </bucket>
          <crosstabColumnHeader>
            <cellContents mode="Transparent">
              <box />
              <textField isStretchWithOverflow="false" pattern="MMMMM" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
                <reportElement x="15" y="0" width="30" height="25" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
                <box />
                <textElement textAlignment="Left" verticalAlignment="Middle">
                  <font pdfFontName="Helvetica-Bold" isBold="true" />
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA[$V{Fecha}]]></textFieldExpression>
              </textField>
            </cellContents>
          </crosstabColumnHeader>
          <crosstabTotalColumnHeader>
            <cellContents mode="Transparent">
              <box />
              <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
                <reportElement x="2" y="2" width="44" height="21" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
                <box />
                <textElement textAlignment="Right" verticalAlignment="Middle">
                  <font pdfFontName="Helvetica-Bold" isBold="true" />
                </textElement>
                <textFieldExpression class="java.lang.String"><![CDATA["TOTAL"]]></textFieldExpression>
              </textField>
            </cellContents>
          </crosstabTotalColumnHeader>
        </columnGroup>
        <measure name="Total_Sum" class="java.math.BigDecimal" calculation="Sum" percentageOf="None">
          <measureExpression><![CDATA[$F{Total}]]></measureExpression>
        </measure>
        <crosstabCell width="49" height="35">
          <cellContents mode="Transparent">
            <box />
            <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
              <reportElement x="1" y="0" width="45" height="30" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
              <box />
              <textElement textAlignment="Right" verticalAlignment="Middle">
                <font size="8" />
              </textElement>
              <textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{Total_Sum}]]></textFieldExpression>
            </textField>
          </cellContents>
        </crosstabCell>
        <crosstabCell width="50" height="35" columnTotalGroup="Fecha">
          <cellContents mode="Transparent">
            <box />
            <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
              <reportElement x="0" y="0" width="50" height="30" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
              <box />
              <textElement textAlignment="Right" verticalAlignment="Middle">
                <font pdfFontName="Helvetica-Bold" size="8" isBold="true" />
              </textElement>
              <textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{Total_Sum}]]></textFieldExpression>
            </textField>
          </cellContents>
        </crosstabCell>
        <crosstabCell width="49" height="30" rowTotalGroup="Vendedor">
          <cellContents mode="Transparent">
            <box />
            <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
              <reportElement x="0" y="0" width="47" height="30" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
              <box />
              <textElement textAlignment="Right" verticalAlignment="Middle">
                <font pdfFontName="Helvetica-Bold" size="8" isBold="true" />
              </textElement>
              <textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{Total_Sum}]]></textFieldExpression>
            </textField>
          </cellContents>
        </crosstabCell>
        <crosstabCell width="50" height="30" rowTotalGroup="Vendedor" columnTotalGroup="Fecha">
          <cellContents mode="Transparent">
            <box />
            <textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None" hyperlinkTarget="Self" bookmarkLevel="0">
              <reportElement x="0" y="0" width="50" height="30" key="textField" positionType="FixRelativeToTop" stretchType="NoStretch" isPrintRepeatedValues="true" isRemoveLineWhenBlank="false" isPrintInFirstWholeBand="false" isPrintWhenDetailOverflows="false" />
              <box />
              <textElement textAlignment="Right" verticalAlignment="Middle">
                <font pdfFontName="Helvetica-Bold" size="8" isBold="true" />
              </textElement>
              <textFieldExpression class="java.math.BigDecimal"><![CDATA[$V{Total_Sum}]]></textFieldExpression>
            </textField>
          </cellContents>
        </crosstabCell>
        <whenNoDataCell>
          <cellContents mode="Transparent">
            <box />
          </cellContents>
        </whenNoDataCell>
      </crosstab>
    </band>
  </summary>
</jasperReport>


